(this.webpackJsonplumen=this.webpackJsonplumen||[]).push([[0],{191:function(e,t,n){e.exports=n(415)},196:function(e,t,n){},197:function(e,t,n){},228:function(e,t){},290:function(e,t,n){},414:function(e,t,n){},415:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),i=n(40),r=n.n(i),l=(n(196),n(4)),c=(n(197),function(e){var t={display:"flex",justifyContent:e.justifyContent,alignItems:e.alignItems,height:window.innerHeight,width:window.innerWidth,backgroundColor:e.backgroundColor};return o.a.createElement("div",{style:t},e.children)}),d=n(64),s=n(28),u=n(174),p=n.n(u),x=n(26),f=n(17),m=n.n(f),g=p()("http://192.168.124.121:6700"),h=o.a.createContext(),b=function(e,t){var n=Object(s.a)({},e);switch(t.type){case"SET_ROOMS":n.rooms=t.payload.rooms,n.house=t.payload.house;break;case"SET_ANALYTICS":n.analytics=t.payload;break;case"SET_IS_DAY":n.isDay=!0;break;case"SET_IS_NIGHT":n.isDay=!1;break;default:throw new Error}return n},y={rooms:[],house:{analytics:[],totalPowerOn:0},isLoading:!1,isDay:!1,colors:{day:{color:"black",backgroundColor:"white"},night:{color:"white",backgroundColor:"#333333"}}},w=function(e){var t=o.a.useReducer(b,y),n=Object(l.a)(t,2),a=n[0],i=n[1];return o.a.useLayoutEffect((function(){var e=(new Date).getHours();e>=6&&e<=17&&i({type:"SET_IS_DAY"}),m.a.get("/api/rooms").then((function(e){return e})).catch((function(e){console.log(e)})).then((function(e){i({type:"SET_ROOMS",payload:e.data})})),g.on("groups_update",(function(e){i({type:"SET_ROOMS",payload:e})}))}),[]),o.a.createElement(h.Provider,{value:Object(s.a)({},a,{dispatch:i})},e.children)},E=function(e){var t=o.a.useContext(h).isDay,n=Object(s.a)({color:e.color?e.color:t?"#00000078":"white",fontSize:18,fontFamily:" 'Fredoka One', cursive"},e.style);return o.a.createElement("div",{style:n},e.children)},k=function(e){return e?"0 2px 1px -1px #ffffff80, 0 1px 1px 0 rgba(0,0,0,.14), 0 1px 3px 0 rgba(0,0,0,.12)":"0 2px 1px -1px #00000080, 0 1px 1px 0 rgba(0,0,0,.14), 0 1px 3px 0 rgba(0,0,0,.12)"},v=function(e){var t=o.a.useContext(h).isDay,n=Object(s.a)(Object(d.a)({display:"flex",flexDirection:e.direction,justifyContent:e.justifyContent,alignItems:e.alignItems,height:e.height,width:e.width,backgroundColor:e.backgroundColor,padding:e.padding,margin:e.margin,borderRadius:e.borderRadius,flexWrap:e.flexWrap,boxShadow:e.boxShadow&&k(t)},"padding",e.padding),e.style);return o.a.createElement(o.a.Fragment,null,o.a.createElement(E,{style:{minHeight:e.title&&30}},e.title),o.a.createElement("div",{style:n},e.children))},C=n(33),S=n(21),O=function(){var e=o.a.useContext(h).isDay;return o.a.createElement(v,{borderRadius:"3px 30px 30px 30px",backgroundColor:e?"#333333":"#fff",height:"120px",width:"100%",justifyContent:"center",alignItems:"center",direction:"column"},o.a.createElement(C.a,{color:e?"#fff":"#333333",size:"2x",icon:S.d}),o.a.createElement("div",{style:{marginTop:10}}),o.a.createElement(E,{color:e?"#fff":"#333333"},"Lumen"))},L=n(420),D=function(e){var t=o.a.useContext(h).isDay,n={name:{fontSize:e.fontSize,marginLeft:e.noMargin?0:10,color:e.titleColor?e.titleColor:t?"#000000a6":"white",fontFamily:'"Fredoka One", cursive'},icon:{display:"flex",alignItems:"center",marginLeft:6},description:{fontSize:11,marginLeft:e.noMargin?0:10,color:t?"#00000078":"white",fontFamily:'"Fredoka One", cursive'}};return o.a.createElement(v,{direction:"column"},o.a.createElement(v,{direction:"row"},o.a.createElement("div",{style:n.name},e.title),o.a.createElement("div",{style:n.icon},e.icon)),o.a.createElement("div",{style:n.description},e.description))},M=function(e){var t=o.a.useState(0),n=Object(l.a)(t,2),a=n[0],i=n[1],r=o.a.useContext(h),c=function(e){var t=e.on,n=e.id,a=e.setLoading;e.room;return a(n.toString()),t?function(e,t){return m.a.get("/api/room/off/".concat(e)).then((function(e){return t(0),e})).catch((function(e){console.log(e)}))}(n,a):function(e,t){return m.a.get("/api/room/on/".concat(e)).then((function(e){return t(0),e})).catch((function(e){console.log(e)}))}(n,a)},d={item:{padding:"12px 0px 12px 0px",color:"white",fontFamily:'"Fredoka One", cursive'},name:{marginLeft:10},description:{fontSize:11,marginLeft:10,color:"#ffffff6b",fontFamily:'"Fredoka One", cursive'}};return r.rooms.map((function(e){var t=new Date(e.lastOn).toLocaleDateString("en-US",{month:"long",day:"numeric",hour:"numeric",minute:"numeric"});return o.a.createElement(v,{alignItems:"flex-start",direction:"row",style:d.item},o.a.createElement(L.a,{loading:a==e.id,checked:e.on,onChange:function(){return c({on:e.on,id:e.id,setLoading:i,room:e})}}),o.a.createElement(D,{fontSize:14,title:e.name,description:e.on?"All lights on":"Last on: ".concat(t)}))}))},j=function(){var e=o.a.useContext(h),t=parseFloat(e.house.totalPowerOn).toFixed(3)||0;return o.a.createElement(D,{fontSize:28,title:"".concat(t,"W"),description:"Power Usage"})},T=function(){var e=o.a.useContext(h);if(0===e.house.analytics.length)return null;var t=(new Date).getMonth(),n=Object(x.filter)(e.house.analytics,{id:t})||0,a=Object(l.a)(n,1)[0];return o.a.createElement(D,{fontSize:28,title:"".concat((a.totalTimeOn/36e5).toFixed(2),"H"),description:"Hours Active"})},F=n(20),R=n.n(F),I=(n(290),function(e){return"2px dashed rgba(255, 255, 255, 0.23)"}),z=function(){var e=o.a.useContext(h),t=e.isDay,n=e.rooms;return n.map((function(e,a){var i,r,l={bubble:{height:30,width:30,borderRadius:50,marginBottom:5,border:"4px solid grey",transition:"background-color 1s ease-in-out","@keyframes":"0% {background-color: #c55d03; 50% {background-color: #eb6d00;}; 100% {background-color: #c55d03;}}"},onFor:{fontSize:10,backgroundColor:"#cccccc",padding:"0px 10px 0px 10px",borderRadius:30}};e.on?(i=(((new Date).getTime()-e.lastOn)/6e4).toFixed(2),r="".concat(i>60?"".concat((i/60).toFixed(2)," Hours"):"".concat(i," Minutes"))):r="Off";return o.a.createElement(v,{padding:"20px",direction:"column",style:{borderBottom:a!==n.length-1&&I(t)},justifyContent:"center",alignItems:"center",height:"100px",width:"100%"},o.a.createElement("div",{className:R()({"breath-animation":e.on}),style:l.bubble}),o.a.createElement(D,{noMargin:!0,fontSize:12,title:e.name}),o.a.createElement("div",{style:l.onFor},r))}))},_=n(186),A=n(10),H=function(){var e=o.a.useContext(h);if(0===e.rooms.length)return null;var t=Object(x.filter)(e.house.analytics,{id:(new Date).getMonth()}),n=Object(l.a)(t,1)[0],a=e.rooms.map((function(e){var t=Object(x.filter)(e.analytics,{id:(new Date).getMonth()}),a=Object(l.a)(t,1)[0];return{label:e.name,id:e.name,value:(a.totalTimeOn/n.totalTimeOn*100).toFixed(2)}}));return o.a.createElement(_.a,{enableRadialLabels:!A.isMobile,sliceLabel:function(e){return"".concat(parseInt(e.value).toFixed(0),"%")},data:a,margin:!A.isMobile&&{top:40,right:80,bottom:80,left:80},innerRadius:.5,padAngle:.7,cornerRadius:3,colors:{scheme:"nivo"},borderWidth:1,borderColor:{from:"color",modifiers:[["darker",.2]]},radialLabelsSkipAngle:10,radialLabelsTextXOffset:6,radialLabelsTextColor:e.isDay?"black":"white",radialLabelsLinkOffset:0,radialLabelsLinkDiagonalLength:16,radialLabelsLinkHorizontalLength:24,radialLabelsLinkStrokeWidth:1,radialLabelsLinkColor:{from:"color"},slicesLabelsSkipAngle:10,slicesLabelsTextColor:e.isDay?"black":"white",animate:!0,motionStiffness:90,motionDamping:15,sortByValue:!0,theme:{textColor:"#eee",fontSize:"14px",tickColor:"#eee",fontWeight:900}})},W=function(){var e=o.a.useContext(h);if(0===e.house.analytics.length)return null;var t=(new Date).getMonth(),n=0===t?11:t-1,a=e.house.analytics[n],i=e.house.analytics[t],r=100*(a.totalTimeOn/i.totalTimeOn).toFixed(2)-100;return o.a.createElement(D,{fontSize:28,title:"".concat(-100===r?"N/A":"".concat(r,"%")),titleColor:r>0?"#f95858":"#70e993",icon:o.a.createElement(C.a,{size:"2x",style:{color:r>0?"#f95858":"#70e993"},icon:-100===r?S.b:r>1?S.c:S.a}),description:-100===r?"Check back next month":"Change since last month"})},B=(n(414),function(e){return e?"0 2px 1px -1px #ffffff80, 0 1px 1px 0 rgba(0,0,0,.14), 0 1px 3px 0 rgba(0,0,0,.12)":"0 2px 1px -1px #00000080, 0 1px 1px 0 rgba(0,0,0,.14), 0 1px 3px 0 rgba(0,0,0,.12)"}),N=function(){var e=o.a.useContext(h),t=e.dispatch,n=e.isDay;return o.a.createElement(C.a,{size:"lg",color:n?"#fff":"#333333",icon:S.d,onClick:function(){t(n?{type:"SET_IS_NIGHT"}:{type:"SET_IS_DAY"})},style:{padding:"14px",backgroundColor:n?"#333333":"#fff",borderRadius:100,position:"absolute",bottom:"50px",right:"50px",height:"50px",width:"50px",boxShadow:B(n)},className:"navigation-button show-zoom-animation"})};var P=function(){var e=o.a.useState(window.innerHeight),t=Object(l.a)(e,2),n=(t[0],t[1]),a=o.a.useState(!1),i=Object(l.a)(a,2);i[0],i[1],window.addEventListener("resize",(function(){n(window.innerHeight-129)}));var r=o.a.useContext(h).isDay;return o.a.createElement(c,{backgroundColor:r?"#ededed":"#1d1d1d"},!A.isMobile&&o.a.createElement(v,{width:"20%"},o.a.createElement(v,{direction:"column",alignItems:"center",borderRadius:"3px 30px 30px 30px",width:"100%",margin:"30px 30px 30px 30px",backgroundColor:r?"#fff":"#333333",boxShadow:!0},o.a.createElement(O,null),o.a.createElement(z,null))),o.a.createElement(v,{width:A.isMobile?"100%":"80%",margin:A.isMobile?"30px 30px 30px 30px":"30px 30px 30px 0px"},o.a.createElement(v,{height:"100%",width:A.isMobile?"100%":"33%",margin:A.isMobile?"0px 0px 0px 0px":"0px 30px 0px 0px",direction:"column"},o.a.createElement(v,{borderRadius:"3px 30px 30px 30px",title:"Usage",padding:"20px",height:"100px",width:"100%",backgroundColor:r?"#fff":"#333333",boxShadow:!0},o.a.createElement(T,null)),o.a.createElement(v,{borderRadius:"3px 30px 30px 30px",justifyContent:"flex-start",title:A.isMobile?"Breakdown":"Rooms",direction:"column",padding:"20px",height:"calc(100% - 160px)",width:"calc(100%)",margin:"0px ".concat(A.isMobile?0:30," 0px 0px"),backgroundColor:r?"#fff":"#333333",boxShadow:!0},A.isMobile?o.a.createElement(H,null):o.a.createElement(M,null))),!A.isMobile&&o.a.createElement(v,{height:"100%",width:"66%",direction:"column"},o.a.createElement(v,{direction:"row"},o.a.createElement(v,{borderRadius:"3px 30px 30px 30px",padding:"20px",height:"100px",width:"50%",margin:"30px 30px 0px 0px",backgroundColor:r?"#fff":"#333333",boxShadow:!0},o.a.createElement(j,null)),o.a.createElement(v,{borderRadius:"3px 30px 30px 30px",padding:"20px",height:"100px",width:"50%",margin:"30px 0px 0px 0px",backgroundColor:r?"#fff":"#333333",boxShadow:!0},o.a.createElement(W,null))),o.a.createElement(v,{borderRadius:"3px 30px 30px 30px",title:"Month",padding:"20px",height:"calc(100% - 160px)",width:"100%",margin:"0px 0px 0px 0px",backgroundColor:r?"#fff":"#333333",boxShadow:!0},o.a.createElement(H,null)))),o.a.createElement(v,null,o.a.createElement(N,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(w,null,o.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[191,1,2]]]);
//# sourceMappingURL=main.535414b1.chunk.js.map